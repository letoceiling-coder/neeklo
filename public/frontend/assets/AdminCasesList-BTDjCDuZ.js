import{j as e}from"./motion-vendor-BDjNjK_3.js";import{r as t,L as f}from"./react-vendor-BPADj-9C.js";import{g as j,e as N}from"./index-BGdf3VGM.js";import{a4 as v,K as y,ar as C,A as S}from"./ui-vendor-DApkxKmO.js";import"./products-D4wmSXpS.js";import"./query-vendor-CDDlTtdy.js";function $(){const[d,o]=t.useState([]),[c,w]=t.useState(!0),[m,x]=t.useState(null),[h,a]=t.useState(!1),[i,r]=t.useState(""),[l,n]=t.useState(""),[u,p]=t.useState(!1);t.useEffect(()=>{j().then(s=>{w(!1),s.success&&s.data?o(s.data):x(s.message||"Ошибка загрузки")})},[]);const g=async()=>{if(!i.trim()||!l.trim())return;p(!0);const s=await N({slug:i.trim(),title:l.trim()});p(!1),s.success&&s.data?(a(!1),r(""),n(""),o(b=>[...b,s.data]),window.location.href=`/admin/cases/${s.data.id}`):x(s.message||"Ошибка")};return e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] text-white p-6 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Кейсы"}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/10 border border-white/20 hover:bg-white/15",children:[e.jsx(v,{className:"w-4 h-4"}),"Добавить кейс"]})]}),h&&e.jsxs("div",{className:"mb-6 p-4 rounded-2xl bg-white/5 border border-white/10",children:[e.jsx("p",{className:"text-sm text-white/70 mb-3",children:"Новый кейс"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("input",{value:i,onChange:s=>r(s.target.value),placeholder:"slug (латиница, дефисы)",className:"px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white w-48"}),e.jsx("input",{value:l,onChange:s=>n(s.target.value),placeholder:"Название",className:"px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white flex-1 min-w-[200px]"}),e.jsx("button",{onClick:g,disabled:u,className:"px-4 py-2 rounded-lg bg-cyan-500 text-black font-medium disabled:opacity-50",children:u?"…":"Создать"}),e.jsx("button",{onClick:()=>{a(!1),r(""),n("")},className:"px-4 py-2 rounded-lg border border-white/20",children:"Отмена"})]})]}),m&&e.jsx("p",{className:"text-red-400 mb-4",children:m}),c&&e.jsx("p",{className:"text-white/60",children:"Загрузка…"}),!c&&d.length===0&&!h&&e.jsx("p",{className:"text-white/60",children:"Нет кейсов. Создайте первый."}),e.jsx("div",{className:"space-y-2",children:d.map(s=>e.jsxs(f,{to:`/admin/cases/${s.id}`,className:"flex items-center justify-between p-4 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-white/50 font-mono text-sm",children:s.slug}),e.jsx("span",{className:"font-medium",children:s.title}),s.cover&&e.jsx(y,{className:"w-4 h-4 text-cyan-400"}),s.video&&e.jsx(C,{className:"w-4 h-4 text-violet-400"})]}),e.jsx(S,{className:"w-4 h-4 text-white/40"})]},s.id))})]})})}export{$ as default};
