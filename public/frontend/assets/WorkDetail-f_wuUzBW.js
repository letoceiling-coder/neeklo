import{j as e,A as T,m as n}from"./motion-vendor-CL5qKPaa.js";import{L as P,r as s,g as se,N as ae}from"./react-vendor-BO546PVU.js";import{b as V,C as z,d as f,e as re,F as le}from"./products-BHb0uQ39.js";import{H as ie,ab as ne,a9 as oe,P as $,ac as ce,ad as de,ae as ue,af as me,ag as xe,U as he,ah as pe,ai as fe,aj as ge,a3 as ye,e as be}from"./ui-vendor-DCbmHlwp.js";import{d as je,u as A,S as ve,a as Ne,b as we,g as ke,m as Ce,c as Pe,p as Ie}from"./index-C-8_JWRB.js";import"./query-vendor-cX0vlAD8.js";const Me=({items:c})=>e.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-muted-foreground mb-8",children:[e.jsx(P,{to:"/",className:"hover:text-primary transition-colors flex items-center",children:e.jsx(ie,{className:"w-4 h-4"})}),c.map((t,i)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-4 h-4"}),i===c.length-1?e.jsx("span",{className:"text-foreground font-medium",children:t.label}):e.jsx(P,{to:t.url,className:"hover:text-primary transition-colors",children:t.label})]},i))]}),Se=je("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function F({className:c,variant:t,...i}){return e.jsx("div",{className:V(Se({variant:t}),c),...i})}const D=s.memo(function({src:t,poster:i,title:d,className:o,autoPlay:u=!1,controls:r=!0,aspectRatio:h="video",priority:N=!1}){const a=s.useRef(null),x=s.useRef(null),[m,g]=s.useState(!1),[y,U]=s.useState(!0),[v,q]=s.useState(!1),[B,R]=s.useState(!0),[b,H]=s.useState(!1),[O,w]=s.useState(!0),[W,G]=s.useState(0),[p,X]=s.useState(N),[k,J]=s.useState(!1),E=A(),I=s.useRef(null);s.useEffect(()=>{if(N||p)return;const l=new IntersectionObserver(([j])=>{j.isIntersecting&&(X(!0),l.disconnect())},{rootMargin:"200px 0px",threshold:.1});return x.current&&l.observe(x.current),()=>l.disconnect()},[N,p]),s.useEffect(()=>{if(!p||!a.current)return;const l=a.current;!l.src&&t&&(l.src=t,l.load())},[p,t]),s.useEffect(()=>{if(!u||!p||!a.current||!b)return;const l=new IntersectionObserver(([j])=>{j.isIntersecting&&a.current?(a.current.play().catch(()=>{}),g(!0)):a.current&&(a.current.pause(),g(!1))},{threshold:.5});return x.current&&l.observe(x.current),()=>l.disconnect()},[u,p,b]);const M=s.useCallback(()=>{I.current&&clearTimeout(I.current),w(!0),m&&(I.current=setTimeout(()=>{w(!1)},3e3))},[m]),S=s.useCallback(()=>{a.current&&(m?(a.current.pause(),g(!1)):(a.current.play().catch(()=>{}),g(!0)),M())},[m,M]),K=s.useCallback(()=>{a.current&&(a.current.muted=!y,U(!y))},[y]),Q=s.useCallback(async()=>{if(x.current)try{v?document.exitFullscreen&&await document.exitFullscreen():x.current.requestFullscreen&&await x.current.requestFullscreen(),q(!v)}catch(l){console.error("Fullscreen error:",l)}},[v]),Y=s.useCallback(()=>{if(!a.current)return;const l=a.current.currentTime/a.current.duration*100;G(isNaN(l)?0:l)},[]),Z=s.useCallback(l=>{if(!a.current)return;const j=l.currentTarget.getBoundingClientRect(),te=(l.clientX-j.left)/j.width;a.current.currentTime=te*a.current.duration},[]),L=s.useCallback(()=>{R(!1),H(!0)},[]),_=s.useCallback(()=>{J(!0),R(!1)},[]),ee={video:"aspect-video",square:"aspect-square",wide:"aspect-[21/9]"};return e.jsxs("div",{ref:x,className:V("relative overflow-hidden rounded-xl bg-surface group cursor-pointer",ee[h],o),onMouseMove:M,onMouseEnter:()=>w(!0),onMouseLeave:()=>m&&w(!1),onClick:r?void 0:S,children:[B&&!k&&e.jsx("div",{className:"absolute inset-0 bg-muted/30 animate-pulse flex items-center justify-center",children:e.jsx(oe,{className:"w-8 h-8 text-primary animate-spin"})}),i&&!m&&b&&e.jsx("img",{src:i,alt:d||"Video thumbnail",className:"absolute inset-0 w-full h-full object-cover",loading:N?"eager":"lazy"}),p&&e.jsx("video",{ref:a,poster:i,muted:y,loop:!0,playsInline:!0,preload:"metadata",onLoadedData:L,onCanPlayThrough:L,onTimeUpdate:Y,onError:_,onPlay:()=>g(!0),onPause:()=>g(!1),className:V("absolute inset-0 w-full h-full object-cover transition-opacity duration-300",b?"opacity-100":"opacity-0")}),k&&e.jsx("div",{className:"absolute inset-0 bg-surface flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground text-sm",children:"Видео недоступно"})}),e.jsx(T,{children:!m&&b&&!k&&e.jsx(n.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:E?0:.2},onClick:S,className:"absolute inset-0 flex items-center justify-center z-10","aria-label":"Play video",children:e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-primary/90 backdrop-blur-sm flex items-center justify-center shadow-lg shadow-primary/30 hover:bg-primary hover:scale-110 transition-all",children:e.jsx($,{className:"w-7 h-7 md:w-8 md:h-8 text-primary-foreground ml-1",fill:"currentColor"})})})}),r&&b&&!k&&e.jsx(T,{children:(O||!m)&&e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:E?0:.2},className:"absolute bottom-0 left-0 right-0 p-3 md:p-4 bg-gradient-to-t from-background/90 to-transparent",children:[e.jsx("div",{className:"w-full h-1 bg-white/20 rounded-full mb-3 cursor-pointer group/progress",onClick:Z,children:e.jsx("div",{className:"h-full bg-primary rounded-full relative transition-all",style:{width:`${W}%`},children:e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-primary rounded-full opacity-0 group-hover/progress:opacity-100 transition-opacity"})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:S,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":m?"Pause":"Play",children:m?e.jsx(ce,{className:"w-4 h-4 text-white"}):e.jsx($,{className:"w-4 h-4 text-white ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:K,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":y?"Unmute":"Mute",children:y?e.jsx(de,{className:"w-4 h-4 text-white"}):e.jsx(ue,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsx("span",{className:"text-xs text-white/70 mr-2 hidden sm:block truncate max-w-[150px]",children:d}),e.jsx("button",{onClick:Q,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":v?"Exit fullscreen":"Fullscreen",children:v?e.jsx(me,{className:"w-4 h-4 text-white"}):e.jsx(xe,{className:"w-4 h-4 text-white"})})]})]})]})})]})}),Ve=s.memo(function({items:t,title:i="Галерея"}){const d=A();return!t||t.length===0?null:e.jsx("section",{className:"py-12 md:py-20",children:e.jsxs(z,{children:[e.jsx(n.h2,{className:"text-2xl md:text-3xl font-heading font-bold mb-8",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:d?0:.5},children:i}),e.jsx("div",{className:"grid gap-6 md:gap-8",children:t.map((o,u)=>e.jsx(n.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:d?0:.6,delay:d?0:u*.1},children:o.type==="video"?e.jsx(D,{src:o.src,poster:o.poster,title:o.alt,priority:u===0,className:"w-full rounded-2xl shadow-lg"}):e.jsx("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-surface shadow-lg",children:e.jsx("img",{src:o.src,alt:o.alt||`Image ${u+1}`,loading:u===0?"eager":"lazy",decoding:"async",className:"w-full h-full object-cover"})})},u))})]})})}),C={povuzam:Ie,batnorton:Pe,mnka:Ce,glamping:ke,"ai-agent":we,"ai-video":Ne},ze=()=>{const{slug:c}=se(),t=f.find(r=>r.slug===c),i=f.findIndex(r=>r.slug===c),d=f[i+1]||f[0],o=f[i-1]||f[f.length-1];if(s.useEffect(()=>{window.scrollTo(0,0)},[c]),!t)return e.jsx(ae,{to:"/work",replace:!0});re(`${t.title} | Neeklo Studio`,t.description,`https://neeklo.ru/cases/${t.coverPoster}`,`https://neeklo.ru/work/${t.slug}`,`${t.title}, ${t.category}, кейс, проект`);const u={"@context":"https://schema.org","@type":"CreativeWork",name:t.title,description:t.description,url:`https://neeklo.ru/work/${t.slug}`,creator:{"@type":"Organization",name:"Neeklo Studio",url:"https://neeklo.ru"},datePublished:`${t.year}-01-01`,keywords:t.category};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(ve,{data:u}),e.jsx("main",{className:"pt-24 md:pt-32 pb-16",children:e.jsxs(z,{children:[e.jsx(Me,{items:[{label:"Проекты",url:"/work"},{label:t.title,url:`/work/${t.slug}`}]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mt-8 mb-12",children:[e.jsx(F,{variant:"outline",className:"mb-4 text-primary border-primary/30",children:t.category}),e.jsx("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-heading font-bold mb-4 leading-tight",children:t.title}),e.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl",children:t.description})]}),e.jsx(n.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},className:"mb-12",children:t.coverVideo?e.jsx(D,{src:t.coverVideo,poster:C[t.slug],title:t.title,priority:!0,className:"w-full rounded-2xl shadow-2xl"}):C[t.slug]?e.jsxs("div",{className:"relative aspect-video rounded-2xl overflow-hidden shadow-2xl",children:[e.jsx("img",{src:C[t.slug],alt:t.title,className:"w-full h-full object-cover",loading:"eager",fetchPriority:"high"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/40 to-transparent"})]}):e.jsx("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-gradient-to-br from-primary/20 to-accent/20",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-[120px] md:text-[200px] font-bold text-foreground/5",children:t.id})})})}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-16",children:[e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(he,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Клиент"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.client})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(pe,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Роль"}),e.jsx("p",{className:"font-medium text-sm md:text-base line-clamp-2",children:t.role})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(fe,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Срок"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.duration})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(ge,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Год"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.year})]})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Результаты"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.results.map((r,h)=>e.jsx("div",{className:"glass-effect rounded-xl p-6 border-l-4 border-primary",children:e.jsx("p",{className:"text-foreground font-medium",children:r})},h))})]}),t.metrics&&t.metrics.length>0&&e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Метрики"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.metrics.map((r,h)=>e.jsxs("div",{className:"glass-effect rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-3xl md:text-4xl font-bold text-primary mb-2",children:r.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.label})]},h))})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Технологии"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t.stack.map((r,h)=>e.jsx(F,{variant:"secondary",className:"px-4 py-2 text-sm",children:r},h))})]}),t.gallery&&t.gallery.length>0&&e.jsx(Ve,{items:t.gallery.map(r=>({type:r.type,src:r.src,alt:r.alt,poster:r.type==="video"?C[t.slug]:void 0})),title:"Галерея проекта"}),t.testimonial&&e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"mb-16",children:e.jsxs("div",{className:"glass-effect rounded-2xl p-8 md:p-10",children:[e.jsxs("p",{className:"text-xl md:text-2xl font-medium mb-6 leading-relaxed",children:['"',t.testimonial.text,'"']}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.testimonial.author}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.testimonial.position})]})]})}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"flex flex-col sm:flex-row justify-between gap-4 pt-8 border-t border-border",children:[e.jsxs(P,{to:`/work/${o.slug}`,className:"flex items-center gap-3 group glass-effect rounded-xl p-4 hover:border-primary/50 transition-all",children:[e.jsx(ye,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:-translate-x-1 transition-all"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Предыдущий"}),e.jsx("p",{className:"font-medium line-clamp-1",children:o.title})]})]}),e.jsxs(P,{to:`/work/${d.slug}`,className:"flex items-center justify-end gap-3 group glass-effect rounded-xl p-4 hover:border-primary/50 transition-all",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Следующий"}),e.jsx("p",{className:"font-medium line-clamp-1",children:d.title})]}),e.jsx(be,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all"})]})]})]})}),e.jsx(le,{})]})};export{ze as default};
