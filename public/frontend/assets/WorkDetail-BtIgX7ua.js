import{j as e,A as R,m as c}from"./motion-vendor-DLvmlv9b.js";import{L as I,r as s,g as ae,N as re}from"./react-vendor-lOEcIh_R.js";import{b as $,C as E,e as g,f as le,F as ne}from"./products-D_DvWJL5.js";import{H as ie,J as oe,P as z,a9 as ce,aa as de,ab as ue,ac as me,ad as xe,ae as pe,af as fe,$ as ge,ag as he,_ as be,e as ye}from"./ui-vendor-C3oITkvU.js";import{d as je,u as D,S as ve,a as Ne,b as we,g as ke,m as Ce,c as Pe,p as Ie}from"./index-DkU8jq5s.js";import"./query-vendor-DleG7yCr.js";const Me=({items:i})=>e.jsxs("nav",{className:"flex items-center gap-1.5 md:gap-2 text-xs md:text-sm text-muted-foreground mb-6 md:mb-8 flex-wrap",children:[e.jsx(I,{to:"/",className:"hover:text-foreground transition-colors flex items-center gap-1",children:e.jsx(ie,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),i.map((t,n)=>e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx("span",{className:"text-muted-foreground/50",children:"/"}),n===i.length-1?e.jsx("span",{className:"text-foreground font-medium truncate",children:t.label}):e.jsx(I,{to:t.url,className:"hover:text-foreground transition-colors",children:t.label})]},n))]}),Se=je("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function W({className:i,variant:t,...n}){return e.jsx("div",{className:$(Se({variant:t}),i),...n})}const A=s.memo(function({src:t,poster:n,title:u,className:d,autoPlay:m=!1,controls:a=!0,aspectRatio:o="video",priority:N=!1}){const r=s.useRef(null),p=s.useRef(null),[x,h]=s.useState(!1),[b,B]=s.useState(!0),[v,O]=s.useState(!1),[U,T]=s.useState(!0),[y,q]=s.useState(!1),[G,w]=s.useState(!0),[H,X]=s.useState(0),[f,J]=s.useState(N),[k,_]=s.useState(!1),F=D(),M=s.useRef(null);s.useEffect(()=>{if(N||f)return;const l=new IntersectionObserver(([j])=>{j.isIntersecting&&(J(!0),l.disconnect())},{rootMargin:"200px 0px",threshold:.1});return p.current&&l.observe(p.current),()=>l.disconnect()},[N,f]),s.useEffect(()=>{if(!f||!r.current)return;const l=r.current;!l.src&&t&&(l.src=t,l.load())},[f,t]),s.useEffect(()=>{if(!m||!f||!r.current||!y)return;const l=new IntersectionObserver(([j])=>{j.isIntersecting&&r.current?(r.current.play().catch(()=>{}),h(!0)):r.current&&(r.current.pause(),h(!1))},{threshold:.5});return p.current&&l.observe(p.current),()=>l.disconnect()},[m,f,y]);const S=s.useCallback(()=>{M.current&&clearTimeout(M.current),w(!0),x&&(M.current=setTimeout(()=>{w(!1)},3e3))},[x]),V=s.useCallback(()=>{r.current&&(x?(r.current.pause(),h(!1)):(r.current.play().catch(()=>{}),h(!0)),S())},[x,S]),K=s.useCallback(()=>{r.current&&(r.current.muted=!b,B(!b))},[b]),Q=s.useCallback(async()=>{if(p.current)try{v?document.exitFullscreen&&await document.exitFullscreen():p.current.requestFullscreen&&await p.current.requestFullscreen(),O(!v)}catch(l){console.error("Fullscreen error:",l)}},[v]),Y=s.useCallback(()=>{if(!r.current)return;const l=r.current.currentTime/r.current.duration*100;X(isNaN(l)?0:l)},[]),Z=s.useCallback(l=>{if(!r.current)return;const j=l.currentTarget.getBoundingClientRect(),se=(l.clientX-j.left)/j.width;r.current.currentTime=se*r.current.duration},[]),L=s.useCallback(()=>{T(!1),q(!0)},[]),ee=s.useCallback(()=>{_(!0),T(!1)},[]),te={video:"aspect-video",square:"aspect-square",wide:"aspect-[21/9]"};return e.jsxs("div",{ref:p,className:$("relative overflow-hidden rounded-xl bg-surface group cursor-pointer",te[o],d),onMouseMove:S,onMouseEnter:()=>w(!0),onMouseLeave:()=>x&&w(!1),onClick:a?void 0:V,children:[U&&!k&&e.jsx("div",{className:"absolute inset-0 bg-muted/30 animate-pulse flex items-center justify-center",children:e.jsx(oe,{className:"w-8 h-8 text-primary animate-spin"})}),n&&!x&&y&&e.jsx("img",{src:n,alt:u||"Video thumbnail",className:"absolute inset-0 w-full h-full object-cover",loading:N?"eager":"lazy"}),f&&e.jsx("video",{ref:r,poster:n,muted:b,loop:!0,playsInline:!0,preload:"metadata",onLoadedData:L,onCanPlayThrough:L,onTimeUpdate:Y,onError:ee,onPlay:()=>h(!0),onPause:()=>h(!1),className:$("absolute inset-0 w-full h-full object-cover transition-opacity duration-300",y?"opacity-100":"opacity-0")}),k&&e.jsx("div",{className:"absolute inset-0 bg-surface flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground text-sm",children:"Видео недоступно"})}),e.jsx(R,{children:!x&&y&&!k&&e.jsx(c.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:F?0:.2},onClick:V,className:"absolute inset-0 flex items-center justify-center z-10","aria-label":"Play video",children:e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-primary/90 backdrop-blur-sm flex items-center justify-center shadow-lg shadow-primary/30 hover:bg-primary hover:scale-110 transition-all",children:e.jsx(z,{className:"w-7 h-7 md:w-8 md:h-8 text-primary-foreground ml-1",fill:"currentColor"})})})}),a&&y&&!k&&e.jsx(R,{children:(G||!x)&&e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:F?0:.2},className:"absolute bottom-0 left-0 right-0 p-3 md:p-4 bg-gradient-to-t from-background/90 to-transparent",children:[e.jsx("div",{className:"w-full h-1 bg-white/20 rounded-full mb-3 cursor-pointer group/progress",onClick:Z,children:e.jsx("div",{className:"h-full bg-primary rounded-full relative transition-all",style:{width:`${H}%`},children:e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-primary rounded-full opacity-0 group-hover/progress:opacity-100 transition-opacity"})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:V,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":x?"Pause":"Play",children:x?e.jsx(ce,{className:"w-4 h-4 text-white"}):e.jsx(z,{className:"w-4 h-4 text-white ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:K,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":b?"Unmute":"Mute",children:b?e.jsx(de,{className:"w-4 h-4 text-white"}):e.jsx(ue,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u&&e.jsx("span",{className:"text-xs text-white/70 mr-2 hidden sm:block truncate max-w-[150px]",children:u}),e.jsx("button",{onClick:Q,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":v?"Exit fullscreen":"Fullscreen",children:v?e.jsx(me,{className:"w-4 h-4 text-white"}):e.jsx(xe,{className:"w-4 h-4 text-white"})})]})]})]})})]})}),Ve=s.memo(function({items:t,title:n="Галерея"}){const u=D();return!t||t.length===0?null:e.jsx("section",{className:"py-12 md:py-20",children:e.jsxs(E,{children:[e.jsx(c.h2,{className:"text-2xl md:text-3xl font-heading font-bold mb-8",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:u?0:.5},children:n}),e.jsx("div",{className:"grid gap-6 md:gap-8",children:t.map((d,m)=>e.jsx(c.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:u?0:.6,delay:u?0:m*.1},children:d.type==="video"?e.jsx(A,{src:d.src,poster:d.poster,title:d.alt,priority:m===0,className:"w-full rounded-2xl shadow-lg"}):e.jsx("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-surface shadow-lg",children:e.jsx("img",{src:d.src,alt:d.alt||`Image ${m+1}`,loading:m===0?"eager":"lazy",decoding:"async",className:"w-full h-full object-cover"})})},m))})]})})}),$e="/assets/batnorton-1-lxVPuW6i.jpg",Ee="/assets/batnorton-1-lxVPuW6i.jpg",Te="/assets/batnorton-1-lxVPuW6i.jpg",Fe="/assets/batnorton-1-lxVPuW6i.jpg",C={povuzam:Ie,batnorton:Pe,mnka:Ce,glamping:ke,"ai-agent":we,"ai-video":Ne},P={"batnorton-1.jpg":$e,"batnorton-2.jpg":Ee,"batnorton-3.jpg":Te,"batnorton-4.jpg":Fe},Be=()=>{const{slug:i}=ae(),t=g.find(a=>a.slug===i),n=g.findIndex(a=>a.slug===i),u=g[n+1]||g[0],d=g[n-1]||g[g.length-1];if(s.useEffect(()=>{window.scrollTo(0,0)},[i]),s.useEffect(()=>{i==="batnorton"&&t?.gallery&&(console.log("BatNorton gallery items:",t.gallery),console.log("Gallery images map:",P),t.gallery.forEach(a=>{const o=P[a.src];console.log(`Mapping ${a.src} -> ${o||"NOT FOUND"}`)}))},[i,t]),!t)return e.jsx(re,{to:"/work",replace:!0});le(`${t.title} | Neeklo Studio`,t.description,`https://neeklo.ru/cases/${t.coverPoster}`,`https://neeklo.ru/work/${t.slug}`,`${t.title}, ${t.category}, кейс, проект`);const m={"@context":"https://schema.org","@type":"CreativeWork",name:t.title,description:t.description,url:`https://neeklo.ru/work/${t.slug}`,creator:{"@type":"Organization",name:"Neeklo Studio",url:"https://neeklo.ru"},datePublished:`${t.year}-01-01`,keywords:t.category};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(ve,{data:m}),e.jsxs("main",{className:"pt-20 md:pt-24 lg:pt-28 pb-16",children:[e.jsx(E,{className:"py-3 md:py-4",children:e.jsx(Me,{items:[{label:"Проекты",url:"/work"},{label:t.title,url:`/work/${t.slug}`}]})}),e.jsxs(E,{className:"pt-0",children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mt-8 mb-12",children:[e.jsx(W,{variant:"outline",className:"mb-4 text-primary border-primary/30",children:t.category}),e.jsx("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-heading font-bold mb-4 leading-tight",children:t.title}),e.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl",children:t.description})]}),e.jsx(c.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},className:"mb-12",children:t.coverVideo?e.jsx(A,{src:t.coverVideo,poster:C[t.slug],title:t.title,priority:!0,className:"w-full rounded-2xl shadow-2xl"}):C[t.slug]?e.jsxs("div",{className:"relative aspect-video rounded-2xl overflow-hidden shadow-2xl",children:[e.jsx("img",{src:C[t.slug],alt:t.title,className:"w-full h-full object-cover",loading:"eager",fetchPriority:"high"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/40 to-transparent"})]}):e.jsx("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-gradient-to-br from-primary/20 to-accent/20",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-[120px] md:text-[200px] font-bold text-foreground/5",children:t.id})})})}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-16",children:[e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(pe,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Клиент"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.client})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(fe,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Роль"}),e.jsx("p",{className:"font-medium text-sm md:text-base line-clamp-2",children:t.role})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(ge,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Срок"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.duration})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(he,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Год"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.year})]})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Результаты"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.results.map((a,o)=>e.jsx("div",{className:"glass-effect rounded-xl p-6 border-l-4 border-primary",children:e.jsx("p",{className:"text-foreground font-medium",children:a})},o))})]}),t.metrics&&t.metrics.length>0&&e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Метрики"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.metrics.map((a,o)=>e.jsxs("div",{className:"glass-effect rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-3xl md:text-4xl font-bold text-primary mb-2",children:a.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.label})]},o))})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Технологии"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t.stack.map((a,o)=>e.jsx(W,{variant:"secondary",className:"px-4 py-2 text-sm",children:a},o))})]}),t.gallery&&t.gallery.length>0&&e.jsx(Ve,{items:t.gallery.map(a=>{const o=P[a.src];return o||console.warn(`Gallery image not found: ${a.src}`,P),{type:a.type,src:o||(a.src.startsWith("/")?a.src:`/${a.src}`),alt:a.alt,poster:a.type==="video"?C[t.slug]:void 0}}),title:"Галерея проекта"}),t.testimonial&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"mb-16",children:e.jsxs("div",{className:"glass-effect rounded-2xl p-8 md:p-10",children:[e.jsxs("p",{className:"text-xl md:text-2xl font-medium mb-6 leading-relaxed",children:['"',t.testimonial.text,'"']}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.testimonial.author}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.testimonial.position})]})]})}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"flex flex-col sm:flex-row justify-between gap-4 pt-8 border-t border-border",children:[e.jsxs(I,{to:`/work/${d.slug}`,className:"flex items-center gap-3 group glass-effect rounded-xl p-4 hover:border-primary/50 transition-all",children:[e.jsx(be,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:-translate-x-1 transition-all"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Предыдущий"}),e.jsx("p",{className:"font-medium line-clamp-1",children:d.title})]})]}),e.jsxs(I,{to:`/work/${u.slug}`,className:"flex items-center justify-end gap-3 group glass-effect rounded-xl p-4 hover:border-primary/50 transition-all",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Следующий"}),e.jsx("p",{className:"font-medium line-clamp-1",children:u.title})]}),e.jsx(ye,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all"})]})]})]})]}),e.jsx(ne,{})]})};export{Be as default};
