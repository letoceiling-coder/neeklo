import{j as e,A as F,m as n}from"./motion-vendor-BDjNjK_3.js";import{r as s,g as ae,N as re,L}from"./react-vendor-BPADj-9C.js";import{b as R,C as $,e as f,f as le,F as ie}from"./products-BtLrzWUU.js";import{B as ne,a as z}from"./badge-CNsj0D7h.js";import{u as A,S as oe,a as ce,b as de,g as ue,m as me,c as xe,p as pe}from"./index-C9HLc7uK.js";import{J as he,P as W,ah as fe,ai as ge,aj as ye,ak as je,al as be,am as ve,an as Ne,$ as we,ao as ke,_ as Ce,A as Pe}from"./ui-vendor-BGpQ7DQh.js";import"./query-vendor-CDDlTtdy.js";const B=s.memo(function({src:t,poster:m,title:c,className:o,autoPlay:d=!1,controls:a=!0,aspectRatio:i="video",priority:N=!1}){const r=s.useRef(null),x=s.useRef(null),[u,g]=s.useState(!1),[y,D]=s.useState(!0),[v,O]=s.useState(!1),[U,V]=s.useState(!0),[j,q]=s.useState(!1),[G,w]=s.useState(!0),[X,H]=s.useState(0),[h,J]=s.useState(N),[k,_]=s.useState(!1),E=A(),I=s.useRef(null);s.useEffect(()=>{if(N||h)return;const l=new IntersectionObserver(([b])=>{b.isIntersecting&&(J(!0),l.disconnect())},{rootMargin:"200px 0px",threshold:.1});return x.current&&l.observe(x.current),()=>l.disconnect()},[N,h]),s.useEffect(()=>{if(!h||!r.current)return;const l=r.current;!l.src&&t&&(l.src=t,l.load())},[h,t]),s.useEffect(()=>{if(!d||!h||!r.current||!j)return;const l=new IntersectionObserver(([b])=>{b.isIntersecting&&r.current?(r.current.play().catch(()=>{}),g(!0)):r.current&&(r.current.pause(),g(!1))},{threshold:.5});return x.current&&l.observe(x.current),()=>l.disconnect()},[d,h,j]);const M=s.useCallback(()=>{I.current&&clearTimeout(I.current),w(!0),u&&(I.current=setTimeout(()=>{w(!1)},3e3))},[u]),S=s.useCallback(()=>{r.current&&(u?(r.current.pause(),g(!1)):(r.current.play().catch(()=>{}),g(!0)),M())},[u,M]),K=s.useCallback(()=>{r.current&&(r.current.muted=!y,D(!y))},[y]),Q=s.useCallback(async()=>{if(x.current)try{v?document.exitFullscreen&&await document.exitFullscreen():x.current.requestFullscreen&&await x.current.requestFullscreen(),O(!v)}catch(l){console.error("Fullscreen error:",l)}},[v]),Y=s.useCallback(()=>{if(!r.current)return;const l=r.current.currentTime/r.current.duration*100;H(isNaN(l)?0:l)},[]),Z=s.useCallback(l=>{if(!r.current)return;const b=l.currentTarget.getBoundingClientRect(),se=(l.clientX-b.left)/b.width;r.current.currentTime=se*r.current.duration},[]),T=s.useCallback(()=>{V(!1),q(!0)},[]),ee=s.useCallback(()=>{_(!0),V(!1)},[]),te={video:"aspect-video",square:"aspect-square",wide:"aspect-[21/9]"};return e.jsxs("div",{ref:x,className:R("relative overflow-hidden rounded-xl bg-surface group cursor-pointer",te[i],o),onMouseMove:M,onMouseEnter:()=>w(!0),onMouseLeave:()=>u&&w(!1),onClick:a?void 0:S,children:[U&&!k&&e.jsx("div",{className:"absolute inset-0 bg-muted/30 animate-pulse flex items-center justify-center",children:e.jsx(he,{className:"w-8 h-8 text-primary animate-spin"})}),m&&!u&&j&&e.jsx("img",{src:m,alt:c||"Video thumbnail",className:"absolute inset-0 w-full h-full object-cover",loading:N?"eager":"lazy"}),h&&e.jsx("video",{ref:r,poster:m,muted:y,loop:!0,playsInline:!0,preload:"metadata",onLoadedData:T,onCanPlayThrough:T,onTimeUpdate:Y,onError:ee,onPlay:()=>g(!0),onPause:()=>g(!1),className:R("absolute inset-0 w-full h-full object-cover transition-opacity duration-300",j?"opacity-100":"opacity-0")}),k&&e.jsx("div",{className:"absolute inset-0 bg-surface flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground text-sm",children:"Видео недоступно"})}),e.jsx(F,{children:!u&&j&&!k&&e.jsx(n.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:E?0:.2},onClick:S,className:"absolute inset-0 flex items-center justify-center z-10","aria-label":"Play video",children:e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-primary/90 backdrop-blur-sm flex items-center justify-center shadow-lg shadow-primary/30 hover:bg-primary hover:scale-110 transition-all",children:e.jsx(W,{className:"w-7 h-7 md:w-8 md:h-8 text-primary-foreground ml-1",fill:"currentColor"})})})}),a&&j&&!k&&e.jsx(F,{children:(G||!u)&&e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:E?0:.2},className:"absolute bottom-0 left-0 right-0 p-3 md:p-4 bg-gradient-to-t from-background/90 to-transparent",children:[e.jsx("div",{className:"w-full h-1 bg-white/20 rounded-full mb-3 cursor-pointer group/progress",onClick:Z,children:e.jsx("div",{className:"h-full bg-primary rounded-full relative transition-all",style:{width:`${X}%`},children:e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-primary rounded-full opacity-0 group-hover/progress:opacity-100 transition-opacity"})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:S,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":u?"Pause":"Play",children:u?e.jsx(fe,{className:"w-4 h-4 text-white"}):e.jsx(W,{className:"w-4 h-4 text-white ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:K,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":y?"Unmute":"Mute",children:y?e.jsx(ge,{className:"w-4 h-4 text-white"}):e.jsx(ye,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsx("span",{className:"text-xs text-white/70 mr-2 hidden sm:block truncate max-w-[150px]",children:c}),e.jsx("button",{onClick:Q,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":v?"Exit fullscreen":"Fullscreen",children:v?e.jsx(je,{className:"w-4 h-4 text-white"}):e.jsx(be,{className:"w-4 h-4 text-white"})})]})]})]})})]})}),Ie=s.memo(function({items:t,title:m="Галерея"}){const c=A();return!t||t.length===0?null:e.jsx("section",{className:"py-12 md:py-20",children:e.jsxs($,{children:[e.jsx(n.h2,{className:"text-2xl md:text-3xl font-heading font-bold mb-8",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:c?0:.5},children:m}),e.jsx("div",{className:"grid gap-6 md:gap-8",children:t.map((o,d)=>e.jsx(n.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:c?0:.6,delay:c?0:d*.1},children:o.type==="video"?e.jsx(B,{src:o.src,poster:o.poster,title:o.alt,priority:d===0,className:"w-full rounded-2xl shadow-lg"}):e.jsx("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-surface shadow-lg",children:e.jsx("img",{src:o.src,alt:o.alt||`Image ${d+1}`,loading:d===0?"eager":"lazy",decoding:"async",className:"w-full h-full object-cover"})})},d))})]})})}),Me="/assets/batnorton-1-lxVPuW6i.jpg",Se="/assets/batnorton-1-lxVPuW6i.jpg",$e="/assets/batnorton-1-lxVPuW6i.jpg",Ve="/assets/batnorton-1-lxVPuW6i.jpg",C={povuzam:pe,batnorton:xe,mnka:me,glamping:ue,"ai-agent":de,"ai-video":ce},P={"batnorton-1.jpg":Me,"batnorton-2.jpg":Se,"batnorton-3.jpg":$e,"batnorton-4.jpg":Ve},Ae=()=>{const{slug:p}=ae(),t=f.find(a=>a.slug===p),m=f.findIndex(a=>a.slug===p),c=f[m+1]||f[0],o=f[m-1]||f[f.length-1];if(s.useEffect(()=>{window.scrollTo(0,0)},[p]),s.useEffect(()=>{p==="batnorton"&&t?.gallery&&(console.log("BatNorton gallery items:",t.gallery),console.log("Gallery images map:",P),t.gallery.forEach(a=>{const i=P[a.src];console.log(`Mapping ${a.src} -> ${i||"NOT FOUND"}`)}))},[p,t]),!t)return e.jsx(re,{to:"/work",replace:!0});le(`${t.title} | Neeklo Studio`,t.description,`https://neeklo.ru/cases/${t.coverPoster}`,`https://neeklo.ru/work/${t.slug}`,`${t.title}, ${t.category}, кейс, проект`);const d={"@context":"https://schema.org","@type":"CreativeWork",name:t.title,description:t.description,url:`https://neeklo.ru/work/${t.slug}`,creator:{"@type":"Organization",name:"Neeklo Studio",url:"https://neeklo.ru"},datePublished:`${t.year}-01-01`,keywords:t.category};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(oe,{data:d}),e.jsxs("main",{className:"pt-20 md:pt-24 lg:pt-28 pb-16",children:[e.jsx($,{className:"py-3 md:py-4",children:e.jsx(ne,{items:[{label:"Проекты",url:"/work"},{label:t.title,url:`/work/${t.slug}`}]})}),e.jsxs($,{className:"pt-0",children:[e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mt-8 mb-12",children:[e.jsx(z,{variant:"outline",className:"mb-4 text-primary border-primary/30",children:t.category}),e.jsx("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-heading font-bold mb-4 leading-tight",children:t.title}),e.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl",children:t.description})]}),e.jsx(n.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},className:"mb-12",children:t.coverVideo?e.jsx(B,{src:t.coverVideo,poster:C[t.slug],title:t.title,priority:!0,className:"w-full rounded-2xl shadow-2xl"}):C[t.slug]?e.jsxs("div",{className:"relative aspect-video rounded-2xl overflow-hidden shadow-2xl",children:[e.jsx("img",{src:C[t.slug],alt:t.title,className:"w-full h-full object-cover",loading:"eager",fetchPriority:"high"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/40 to-transparent"})]}):e.jsx("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-gradient-to-br from-primary/20 to-accent/20",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-[120px] md:text-[200px] font-bold text-foreground/5",children:t.id})})})}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-16",children:[e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(ve,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Клиент"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.client})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(Ne,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Роль"}),e.jsx("p",{className:"font-medium text-sm md:text-base line-clamp-2",children:t.role})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(we,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Срок"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.duration})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(ke,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Год"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.year})]})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Результаты"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.results.map((a,i)=>e.jsx("div",{className:"glass-effect rounded-xl p-6 border-l-4 border-primary",children:e.jsx("p",{className:"text-foreground font-medium",children:a})},i))})]}),t.metrics&&t.metrics.length>0&&e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Метрики"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.metrics.map((a,i)=>e.jsxs("div",{className:"glass-effect rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-3xl md:text-4xl font-bold text-primary mb-2",children:a.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.label})]},i))})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Технологии"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t.stack.map((a,i)=>e.jsx(z,{variant:"secondary",className:"px-4 py-2 text-sm",children:a},i))})]}),t.gallery&&t.gallery.length>0&&e.jsx(Ie,{items:t.gallery.map(a=>{const i=P[a.src];return i||console.warn(`Gallery image not found: ${a.src}`,P),{type:a.type,src:i||(a.src.startsWith("/")?a.src:`/${a.src}`),alt:a.alt,poster:a.type==="video"?C[t.slug]:void 0}}),title:"Галерея проекта"}),t.testimonial&&e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"mb-16",children:e.jsxs("div",{className:"glass-effect rounded-2xl p-8 md:p-10",children:[e.jsxs("p",{className:"text-xl md:text-2xl font-medium mb-6 leading-relaxed",children:['"',t.testimonial.text,'"']}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.testimonial.author}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.testimonial.position})]})]})}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"flex flex-col sm:flex-row justify-between gap-4 pt-8 border-t border-border",children:[e.jsxs(L,{to:`/work/${o.slug}`,className:"flex items-center gap-3 group glass-effect rounded-xl p-4 hover:border-primary/50 transition-all",children:[e.jsx(Ce,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:-translate-x-1 transition-all"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Предыдущий"}),e.jsx("p",{className:"font-medium line-clamp-1",children:o.title})]})]}),e.jsxs(L,{to:`/work/${c.slug}`,className:"flex items-center justify-end gap-3 group glass-effect rounded-xl p-4 hover:border-primary/50 transition-all",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Следующий"}),e.jsx("p",{className:"font-medium line-clamp-1",children:c.title})]}),e.jsx(Pe,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all"})]})]})]})]}),e.jsx(ie,{})]})};export{Ae as default};
