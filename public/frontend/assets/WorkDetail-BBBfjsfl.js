import{j as e,A as L,m as c}from"./motion-vendor-BDjNjK_3.js";import{r as a,g as se,N as ae,L as $}from"./react-vendor-BPADj-9C.js";import{b as R,C as S,e as re,f as le,F as ie}from"./products-D4wmSXpS.js";import{B as ne,a as T}from"./badge-CSGQIXQ_.js";import{u as U,g as oe,r as N,a as ce,b as de,c as ue,m as me,d as xe,p as pe,S as he}from"./index-BGdf3VGM.js";import{F as fe,P as W,ag as ge,ah as ye,ai as je,aj as be,ak as ve,al as Ne,am as we,_ as ke,an as Ce,Z as Pe,A as Ie}from"./ui-vendor-DApkxKmO.js";import"./query-vendor-CDDlTtdy.js";const A=a.memo(function({src:o,poster:p,title:t,className:d,autoPlay:u=!1,controls:b=!0,aspectRatio:x="video",priority:h=!1}){const r=a.useRef(null),m=a.useRef(null),[s,n]=a.useState(!1),[i,w]=a.useState(!0),[v,D]=a.useState(!1),[B,V]=a.useState(!0),[g,q]=a.useState(!1),[O,k]=a.useState(!0),[G,X]=a.useState(0),[f,H]=a.useState(h),[C,Y]=a.useState(!1),E=U(),P=a.useRef(null);a.useEffect(()=>{if(h||f)return;const l=new IntersectionObserver(([y])=>{y.isIntersecting&&(H(!0),l.disconnect())},{rootMargin:"200px 0px",threshold:.1});return m.current&&l.observe(m.current),()=>l.disconnect()},[h,f]),a.useEffect(()=>{if(!f||!r.current)return;const l=r.current;!l.src&&o&&(l.src=o,l.load())},[f,o]),a.useEffect(()=>{if(!u||!f||!r.current||!g)return;const l=new IntersectionObserver(([y])=>{y.isIntersecting&&r.current?(r.current.play().catch(()=>{}),n(!0)):r.current&&(r.current.pause(),n(!1))},{threshold:.5});return m.current&&l.observe(m.current),()=>l.disconnect()},[u,f,g]);const I=a.useCallback(()=>{P.current&&clearTimeout(P.current),k(!0),s&&(P.current=setTimeout(()=>{k(!1)},3e3))},[s]),M=a.useCallback(()=>{r.current&&(s?(r.current.pause(),n(!1)):(r.current.play().catch(()=>{}),n(!0)),I())},[s,I]),Z=a.useCallback(()=>{r.current&&(r.current.muted=!i,w(!i))},[i]),_=a.useCallback(async()=>{if(m.current)try{v?document.exitFullscreen&&await document.exitFullscreen():m.current.requestFullscreen&&await m.current.requestFullscreen(),D(!v)}catch(l){console.error("Fullscreen error:",l)}},[v]),J=a.useCallback(()=>{if(!r.current)return;const l=r.current.currentTime/r.current.duration*100;X(isNaN(l)?0:l)},[]),K=a.useCallback(l=>{if(!r.current)return;const y=l.currentTarget.getBoundingClientRect(),te=(l.clientX-y.left)/y.width;r.current.currentTime=te*r.current.duration},[]),F=a.useCallback(()=>{V(!1),q(!0)},[]),Q=a.useCallback(()=>{Y(!0),V(!1)},[]),ee={video:"aspect-video",square:"aspect-square",wide:"aspect-[21/9]"};return e.jsxs("div",{ref:m,className:R("relative overflow-hidden rounded-xl bg-surface group cursor-pointer",ee[x],d),onMouseMove:I,onMouseEnter:()=>k(!0),onMouseLeave:()=>s&&k(!1),onClick:b?void 0:M,children:[B&&!C&&e.jsx("div",{className:"absolute inset-0 bg-muted/30 animate-pulse flex items-center justify-center",children:e.jsx(fe,{className:"w-8 h-8 text-primary animate-spin"})}),p&&!s&&g&&e.jsx("img",{src:p,alt:t||"Video thumbnail",className:"absolute inset-0 w-full h-full object-cover",loading:h?"eager":"lazy"}),f&&e.jsx("video",{ref:r,poster:p,muted:i,loop:!0,playsInline:!0,preload:"metadata",onLoadedData:F,onCanPlayThrough:F,onTimeUpdate:J,onError:Q,onPlay:()=>n(!0),onPause:()=>n(!1),className:R("absolute inset-0 w-full h-full object-cover transition-opacity duration-300",g?"opacity-100":"opacity-0")}),C&&e.jsx("div",{className:"absolute inset-0 bg-surface flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground text-sm",children:"Видео недоступно"})}),e.jsx(L,{children:!s&&g&&!C&&e.jsx(c.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:E?0:.2},onClick:M,className:"absolute inset-0 flex items-center justify-center z-10","aria-label":"Play video",children:e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-primary/90 backdrop-blur-sm flex items-center justify-center shadow-lg shadow-primary/30 hover:bg-primary hover:scale-110 transition-all",children:e.jsx(W,{className:"w-7 h-7 md:w-8 md:h-8 text-primary-foreground ml-1",fill:"currentColor"})})})}),b&&g&&!C&&e.jsx(L,{children:(O||!s)&&e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:E?0:.2},className:"absolute bottom-0 left-0 right-0 p-3 md:p-4 bg-gradient-to-t from-background/90 to-transparent",children:[e.jsx("div",{className:"w-full h-1 bg-white/20 rounded-full mb-3 cursor-pointer group/progress",onClick:K,children:e.jsx("div",{className:"h-full bg-primary rounded-full relative transition-all",style:{width:`${G}%`},children:e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-primary rounded-full opacity-0 group-hover/progress:opacity-100 transition-opacity"})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:M,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":s?"Pause":"Play",children:s?e.jsx(ge,{className:"w-4 h-4 text-white"}):e.jsx(W,{className:"w-4 h-4 text-white ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:Z,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":i?"Unmute":"Mute",children:i?e.jsx(ye,{className:"w-4 h-4 text-white"}):e.jsx(je,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t&&e.jsx("span",{className:"text-xs text-white/70 mr-2 hidden sm:block truncate max-w-[150px]",children:t}),e.jsx("button",{onClick:_,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors","aria-label":v?"Exit fullscreen":"Fullscreen",children:v?e.jsx(be,{className:"w-4 h-4 text-white"}):e.jsx(ve,{className:"w-4 h-4 text-white"})})]})]})]})})]})}),Me=a.memo(function({items:o,title:p="Галерея"}){const t=U();return!o||o.length===0?null:e.jsx("section",{className:"py-12 md:py-20",children:e.jsxs(S,{children:[e.jsx(c.h2,{className:"text-2xl md:text-3xl font-heading font-bold mb-8",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:t?0:.5},children:p}),e.jsx("div",{className:"grid gap-6 md:gap-8",children:o.map((d,u)=>e.jsx(c.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:t?0:.6,delay:t?0:u*.1},children:d.type==="video"?e.jsx(A,{src:d.src,poster:d.poster,title:d.alt,priority:u===0,className:"w-full rounded-2xl shadow-lg"}):e.jsx("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-surface shadow-lg",children:e.jsx("img",{src:d.src,alt:d.alt||`Image ${u+1}`,loading:u===0?"eager":"lazy",decoding:"async",className:"w-full h-full object-cover"})})},u))})]})})}),Se="/assets/batnorton-1-lxVPuW6i.jpg",Ve="/assets/batnorton-1-lxVPuW6i.jpg",Ee="/assets/batnorton-1-lxVPuW6i.jpg",Fe="/assets/batnorton-1-lxVPuW6i.jpg",z={povuzam:pe,batnorton:xe,mnka:me,glamping:ue,"ai-agent":de,"ai-video":ce},Le={"batnorton-1.jpg":Se,"batnorton-2.jpg":Ve,"batnorton-3.jpg":Ee,"batnorton-4.jpg":Fe},De=()=>{const{slug:j}=se(),[o,p]=a.useState(re);a.useEffect(()=>{oe().then(s=>{s.success&&s.data&&s.data.length>0&&p(s.data)})},[]),a.useEffect(()=>{window.scrollTo(0,0)},[j]);const t=o.find(s=>s.slug===j)??null,d=o.findIndex(s=>s.slug===j),u=o[d+1]||o[0],b=o[d-1]||o[o.length-1],x=t?.cover?N(t.cover):t?.slug&&z[t.slug]||null,h=t?.video?N(t.video):t?.coverVideo||null,r=a.useMemo(()=>{if(!t)return[];const s=t.cover?N(t.cover):t.slug&&z[t.slug]||void 0,n=[];return(t.video||t.coverVideo)&&n.push({type:"video",src:t.video?N(t.video):t.coverVideo,poster:s}),(t.gallery||[]).forEach(i=>{const w=Le[i.src]||i.src&&(i.src.startsWith("http")?i.src:i.src.startsWith("/")?N(i.src):`/${i.src}`);w&&n.push({type:i.type||"image",src:w,alt:i.alt,poster:i.type==="video"?s:void 0})}),n},[t]);if(!t)return e.jsx(ae,{to:"/work",replace:!0});le(`${t.title} | Neeklo Studio`,t.description||"",x&&(x.startsWith("http")?x:`https://neeklo.ru${x}`)||"https://neeklo.ru/og-work.jpg",`https://neeklo.ru/work/${t.slug}`,`${t.title}, ${t.category||""}, кейс, проект`);const m={"@context":"https://schema.org","@type":"CreativeWork",name:t.title,description:t.description,url:`https://neeklo.ru/work/${t.slug}`,creator:{"@type":"Organization",name:"Neeklo Studio",url:"https://neeklo.ru"},datePublished:`${t.year||new Date().getFullYear()}-01-01`,keywords:t.category};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(he,{data:m}),e.jsxs("main",{className:"pt-20 md:pt-24 lg:pt-28 pb-16",children:[e.jsx(S,{className:"py-3 md:py-4",children:e.jsx(ne,{items:[{label:"Проекты",url:"/work"},{label:t.title,url:`/work/${t.slug}`}]})}),e.jsxs(S,{className:"pt-0",children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mt-8 mb-12",children:[e.jsx(T,{variant:"outline",className:"mb-4 text-primary border-primary/30",children:t.category}),e.jsx("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-heading font-bold mb-4 leading-tight",children:t.title}),e.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl",children:t.description})]}),e.jsx(c.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},className:"mb-12",children:h?e.jsx(A,{src:h,poster:x||void 0,title:t.title||"",priority:!0,className:"w-full rounded-2xl shadow-2xl"}):x?e.jsxs("div",{className:"relative aspect-video rounded-2xl overflow-hidden shadow-2xl",children:[e.jsx("img",{src:x,alt:t.title||"",className:"w-full h-full object-cover",loading:"eager",fetchPriority:"high"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/40 to-transparent"})]}):e.jsx("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-gradient-to-br from-primary/20 to-accent/20",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-[120px] md:text-[200px] font-bold text-foreground/5",children:t.id??t.slug?.[0]?.toUpperCase()})})})}),(t.client||t.role||t.duration||t.year)&&e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-16",children:[t.client&&e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(Ne,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Клиент"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.client})]}),t.role&&e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(we,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Роль"}),e.jsx("p",{className:"font-medium text-sm md:text-base line-clamp-2",children:t.role})]}),t.duration&&e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(ke,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Срок"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.duration})]}),t.year&&e.jsxs("div",{className:"glass-effect rounded-xl p-4 md:p-6",children:[e.jsx(Ce,{className:"w-5 h-5 text-primary mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Год"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:t.year})]})]}),t.results&&t.results.length>0&&e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Результаты"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.results.map((s,n)=>e.jsx("div",{className:"glass-effect rounded-xl p-6 border-l-4 border-primary",children:e.jsx("p",{className:"text-foreground font-medium",children:s})},n))})]}),t.metrics&&t.metrics.length>0&&e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Метрики"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.metrics.map((s,n)=>e.jsxs("div",{className:"glass-effect rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-3xl md:text-4xl font-bold text-primary mb-2",children:s.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.label})]},n))})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-semibold mb-6",children:"Технологии"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t.stack.map((s,n)=>e.jsx(T,{variant:"secondary",className:"px-4 py-2 text-sm",children:s},n))})]}),r.length>0&&e.jsx(Me,{items:r,title:"Галерея проекта"}),t.testimonial&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"mb-16",children:e.jsxs("div",{className:"glass-effect rounded-2xl p-8 md:p-10",children:[e.jsxs("p",{className:"text-xl md:text-2xl font-medium mb-6 leading-relaxed",children:['"',t.testimonial.text,'"']}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.testimonial.author}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.testimonial.position})]})]})}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"flex flex-col sm:flex-row justify-between gap-4 pt-8 border-t border-border",children:[e.jsxs($,{to:`/work/${b.slug}`,className:"flex items-center gap-3 group glass-effect rounded-xl p-4 hover:border-primary/50 transition-all",children:[e.jsx(Pe,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:-translate-x-1 transition-all"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Предыдущий"}),e.jsx("p",{className:"font-medium line-clamp-1",children:b.title})]})]}),e.jsxs($,{to:`/work/${u.slug}`,className:"flex items-center justify-end gap-3 group glass-effect rounded-xl p-4 hover:border-primary/50 transition-all",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Следующий"}),e.jsx("p",{className:"font-medium line-clamp-1",children:u.title})]}),e.jsx(Ie,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all"})]})]})]})]}),e.jsx(ie,{})]})};export{De as default};
