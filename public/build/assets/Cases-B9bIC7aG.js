import{_ as p,c as n,a as e,b as i,e as m,d as u,v as c,t as a,F as h,q as f,j as g,o as l}from"./admin-DjQGoEOB.js";const b={name:"Cases",data(){return{cases:[],loading:!0,error:null,showAddForm:!1,creating:!1,newCase:{slug:"",title:""}}},mounted(){this.fetchCases()},methods:{async fetchCases(){this.loading=!0,this.error=null;try{const o=await g.get("/api/cases");this.cases=o.data.data||[]}catch(o){console.error("Error fetching cases:",o),this.error="Ошибка загрузки кейсов"}finally{this.loading=!1}},async handleCreate(){if(!(!this.newCase.slug.trim()||!this.newCase.title.trim())){this.creating=!0,this.error=null;try{const o=await g.post("/api/v1/cases",{slug:this.newCase.slug.trim(),title:this.newCase.title.trim()});o.data.success&&o.data.data?(this.cancelAdd(),this.fetchCases(),window.location.href=`/admin/cases/${o.data.data.id}`):this.error=o.data.message||"Ошибка создания кейса"}catch(o){console.error("Error creating case:",o),this.error=o.response?.data?.message||"Ошибка создания кейса"}finally{this.creating=!1}}},cancelAdd(){this.showAddForm=!1,this.newCase={slug:"",title:""},this.error=null},goToCase(o){window.location.href=`/admin/cases/${o}`}}},x={class:"cases-page"},v={class:"mb-6"},y={class:"flex items-center justify-between"},w={key:0,class:"mb-6 p-4 rounded-lg bg-card border border-border"},k={class:"space-y-4"},C={class:"flex gap-3"},_=["disabled"],A={key:1,class:"mb-4 p-3 rounded-lg bg-destructive/10 border border-destructive/20 text-destructive"},j={key:2,class:"text-center py-8 text-muted-foreground"},B={key:3,class:"text-center py-8 text-muted-foreground"},F={key:4,class:"space-y-3"},M=["onClick"],V={class:"flex items-center justify-between"},L={class:"flex items-center gap-4"},T={class:"flex items-center gap-2"},E={class:"font-mono text-sm text-muted-foreground"},H={class:"font-semibold text-foreground"},N={key:0,class:"mt-1"},z={class:"text-xs px-2 py-1 rounded bg-muted text-muted-foreground"},D={class:"flex items-center gap-2"},S={key:0,class:"w-4 h-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},U={key:1,class:"w-4 h-4 text-violet-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function q(o,s,G,J,r,d){return l(),n("div",x,[e("div",v,[e("div",y,[s[6]||(s[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-foreground"},"Кейсы"),e("p",{class:"text-muted-foreground mt-1"},"Управление кейсами портфолио")],-1)),e("button",{onClick:s[0]||(s[0]=t=>r.showAddForm=!0),class:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors flex items-center gap-2"},[...s[5]||(s[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Добавить кейс ",-1)])])])]),r.showAddForm?(l(),n("div",w,[s[9]||(s[9]=e("h3",{class:"text-lg font-semibold mb-4"},"Новый кейс",-1)),e("div",k,[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium mb-2"},"Slug (латиница, дефисы)",-1)),u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.newCase.slug=t),type:"text",placeholder:"example-case",class:"w-full px-3 py-2 rounded-lg bg-background border border-border text-foreground"},null,512),[[c,r.newCase.slug]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium mb-2"},"Название",-1)),u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>r.newCase.title=t),type:"text",placeholder:"Название кейса",class:"w-full px-3 py-2 rounded-lg bg-background border border-border text-foreground"},null,512),[[c,r.newCase.title]])]),e("div",C,[e("button",{onClick:s[3]||(s[3]=(...t)=>d.handleCreate&&d.handleCreate(...t)),disabled:r.creating||!r.newCase.slug||!r.newCase.title,class:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors"},a(r.creating?"Создание...":"Создать"),9,_),e("button",{onClick:s[4]||(s[4]=(...t)=>d.cancelAdd&&d.cancelAdd(...t)),class:"px-4 py-2 rounded-lg border border-border hover:bg-muted transition-colors"}," Отмена ")])])])):i("",!0),r.error?(l(),n("div",A,a(r.error),1)):i("",!0),r.loading?(l(),n("div",j," Загрузка кейсов... ")):r.cases.length===0&&!r.showAddForm?(l(),n("div",B," Нет кейсов. Создайте первый кейс. ")):(l(),n("div",F,[(l(!0),n(h,null,f(r.cases,t=>(l(),n("div",{key:t.id,onClick:K=>d.goToCase(t.id),class:"p-4 rounded-lg bg-card border border-border hover:border-primary/50 cursor-pointer transition-all"},[e("div",V,[e("div",L,[e("div",null,[e("div",T,[e("span",E,a(t.slug),1),e("span",H,a(t.title),1)]),t.category?(l(),n("div",N,[e("span",z,a(t.category),1)])):i("",!0)]),e("div",D,[t.cover?(l(),n("svg",S,[...s[10]||(s[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])])):i("",!0),t.video?(l(),n("svg",U,[...s[11]||(s[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])):i("",!0)])]),s[12]||(s[12]=e("svg",{class:"w-5 h-5 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,M))),128))]))])}const P=p(b,[["render",q],["__scopeId","data-v-8278ff67"]]);export{P as default};
